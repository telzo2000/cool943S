# cool943S開発計画
☑︎アクリルケースの設計<br>
☑︎ファームウェアの用意<br>
<br>

# 発注ガーバーファイル名
Ver.1　gbrcool943S20210212.zip,cool943Scasedesigntop.zip,cool943Scasedesignbottom.zip　<br>
Ver.1.1 gbrcool943S20210314.zip <br>
<br>

# cool943S開発に至った経緯

cool943Sは、m.ki設計の自作キーボードです。cool836Aの次の自作キーボードとして、三桁の数字の左はじめに９が付きます。その次の二桁には、採用されたキー数として43と付きます。末尾のSはSplit（分割型）を意味しています。「coolな９番目の43キーある分割型キーボード」となります。<br>
構成はPCBを、いつも便利なSU120で作っています。ケースは全体を覆うようにMDF材を塗装しています。安価な材料としてMDFは優秀です。底面は内部が見えるように、アクリルプレート（スモークガラスのようなもの）を使っています。これらの構成は、これまでキーボードを自作した経験から選択したものであり、一般的な自作キーボードの作り方ではないかもしれません。<br>
cool943S開発の目的は、アドベントカレンダー2020に記事を投稿しようということから始まりました。<br>
そのため、これまで自分が挑戦したことがないものを作ろうと思い、40％の分割型キーボードを選択しました。nomu30を購入して30％キーボードの潔さに影響を受けて、自分でも令和2年上半期に30％キーボードMyFirstMini（34キー）を作りました。この際、SU120を初めて使いました。
MyFirstMiniはnomu30を常用した自分に、ちょっと困った句読点記号のキーを独立して配置しました。nomu30ではレイヤーキーとして使われている句読点記号キーは、日本語入力が主体の私にはちょっと利便性が抑えられました。
その後、購入したCaravelle bleの余剰パーツを利用したCarabellionを作り、SU120の使い方や、木製ケースの組み合わせ方を経験しました。
Carabellionと並行して、格子配列のcool635も開発しました。cool635は35キーの30％キーボードでPro microの配置を考えてキーレイアウトをしました。その後、配線処理に苦労して、ポリウレタン銅線から、シリコンケーブル線に変更するきっかけとなりました。cool635によって、私にとって10列で構成されるキーボードはちょっと使い勝手が難しいこともわかりました。
特に、Pキーの左隣にはBSキーが欲しいことがわかりました。<br>
ここまで作っていくと、30％キーボードでだいたい、問題はないことがわかりました。しかし、矢印キーや数字キーがあったら、やはり便利だろうと思い、30％キーボードのレイアウトに、矢印キーと数字キーを加えた構成で、cool735を開発しました。ただ、cool735は悪くないのですが、やや大きくなり持ち運ぶという用途には向かないキーボードです。常用できないのではしかたがないので、作ってみたけど、お蔵入りの品物となりました。Carabellionも同様に、お蔵入りしています。原点回帰というわけではありませんが、MyFirstMiniの延長上に、30％で使いやすいキーボード、余り方を狭めない配列としてアリス配列を採用する、というコンセプトから、cool836Aを開発しました。<br>
cool836Aについては、cool836Aの[README](https://github.com/telzo2000/cool836A/blob/master/README.md)に詳しく記録してあります。<br>
cool836Aの欠点は、キー数です。持ち運びを考えたとき、あの大きさは有利であり、キーレイアウトは疲れを軽減すると思います。ただ、あれ以上のキー数を求めたとき、40％のAlice配列のキーボードが必要となります。ただ、それは大型化を招き、結果的に、一般的なAlice配列のキーボード（60％や65％）に帰結すると思います。私の中では40％のAlice配列は持ち運び用途としては大きい印象です。その大きさでAlice配列を求めるのであれば、分割キーボードで十分と考えます。ここからcool943Sのコンセプトは決まりました。<br>
Alice配列ではないけど、肩を狭めなくても良い分割型、そして40％キーボードとなりました。<br>
課題はただ一つ、私自身が分割型キーボードを開発した経験がないことでした。これまで作ってキーボードでは、ファームウェアの開発はせずにすみました。Keyboard Firmware Builderというサイトが、初心者の私の味方でした。しかし、このサイトでは多分、分割型キーボードのファームウェアは作れないのです。（私が使い始めた頃は、LED関係の機能もできませんでしたが、令和２年秋ごろにはできるようになりました）<br>
結果として、私はこれまで回避してきたqmk_firmwareの勉強をする羽目となりました。私が普段使っているのはマックです。先人たちの情報をネットで探しながら、やってみましたが、できません。homebrewあたりからつまずきました。pythonがいろいろと邪魔をして、先へ進めませんでした。<br>
我が家にあるMacOS以外のOSを持つコンピュータは、ラズパイとGPD Pocket2でした。ウインドウズはさらにわからなかったので、ラズパイでなんとかすることとしました。ネットで「ラズパイ」「QMK」で検索かけたら、いくつかサイトがヒットしました。それらを順に見て、バタバタしていたら、12月末、ラズパイでqmk_firmwareが使えるようになりました。そこでまず、KEYBOARD FIRMWARE BUILDERでファームウェアを作って動かしていていたcool836Aを元にして、qmk_firmwareで作り直すことに成功しました。すぐにできたのではなく、他の人のファームウェアを真似して出来上がったものです。その経験を元にして、cool943Sのファームウェアを作り始めました。元にしたのは、keebioのfourierとRecompile Keyさんのcocoa40です。元々、この２つの分割40％キーボードがcool943Sの目指した姿だったのです。実際のところ、キー数は少なくしてあります。私自身、30％キーボードを常用しています。キー数が少なくても問題はありません。cool943Sは40%のアリス配列の代わりに、より使いやすい配列として分割キーボードを選択して生まれたものです。fourierやcocoa40を入手できていたならば、自分で作ることはなかったと思います。今のところ、cool943Sは私にとってのエンドゲームかもしれません。<br>
令和元年に購入して以来、職場に持ち込み、1年と少しの期間使用していたChoco60に代わって、cool943Sを職場に持ち込みました。職場で使用して問題がなければ、自宅用にもう一つ、作成しようと考えています。（とりあえず、ここまで　令和３年１月27日）<br>
令和3年2月12日にelecrowへkicadで設計したcool943Sを発注しました。アクリルケースも一緒に発注しました。ただ春節絡みで届くのは遅くなるのでょうか。<br>
2月末にelecrowから発注していたPCBやアクリルが届いた。検品の段階で、アクリルは注文通りでないことがわかり、メールを送った。ミドルプレートが注文通りでなかった。左右と長さの違う形状で４種類のミドルプレートを注文していたが、同じ形状のもので届いた。多分、担当者がよく見ずに、似ていると思い込んで、同じものを複数枚作成したのだろう。これは相手側のミスであるから、後日、正しいものが届くであろう。　<br>
実際に作ってみたときにわかった問題点は次の通りである。
①三行目左端のスペースキー部分のスイッチ位置のミス。これについてはkicadで修正した。<br>
②通信に関するピンサインのミス。今後、kicadで修正する。<br>
③混線が発生している可能性。原因がわかっていない。kicadで確認する。②の修正により解決すると思われる。<br>
④アクリルで作ったスイッチプレートが割れやすいこと、スイッチを装着しづらいこと。スイッチプレートをPCBと同じ素材で作るか、スイッチプレートとPCBの間に３mmのアクリルプレートを挟むか、３mmスペーサーを付け加えるか、が思いつく対応策。<br>
上記の①～④を修正したPCBをVer.1.2とした。３月14日elecrowに発注。これは、以前アクリルで作成したスイッチプレートをPCBと同じFR-4素材で作成した。結果として、Ver.1のPCBとスイッチプレートと差し替えることで、Ver.1の資産を継続して使えるようにした。これにより問題なく活用できるようであれば、全部で５セット分ある部品のうち、すでに作成した１セットと、予備用に１セットを残して、他３セットを頒布しようと考えている。これはcool844ほど反響がないと思っているので、それ以上の追加発注は考えていない。<br>
3月末に、ver1.1を組んでみた。FR-4で作ったスイッチプレートはアクリルで作ったものに比べて、剛性感が高かった。強度の心配はなくなった。elecrowに発注した部品は一箇所、ミスがわかり、後日修正されたものが届くこととなった。誰かが春節すぎると技術が低下すると言っていた。そうなのかもしれない。でも、時間がかかるが、修正版が届くのでまあ、よい。このあと、LEDテープを貼り付けて、LEDの点灯もできた。キーレイアウト編集のために、REMAPが使えるようにした。これで初心者でもキーレイアウトの編集が容易になる。<br>



